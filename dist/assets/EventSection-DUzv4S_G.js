import{a as j,r as f,e as N,y as g,j as a,d as w,S as I,L as S}from"./index-C1C7CAEQ.js";import{u as b}from"./useMutation-1ScYOpKK.js";import{G as y}from"./iconBase-Bd1mD37r.js";import{d as _,b as $}from"./index-Dz3XHTch.js";import{a as k}from"./index--uhNhpgY.js";import{i as z,r as P,g as C}from"./api-CJ7_z0NO.js";import{f as A}from"./time-VhdYBW02.js";import{u as D}from"./useQuery-CyVCY3EZ.js";import{A as E}from"./Avatar-ev3lOT99.js";function L(s){return y({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M388.8 896.4v-27.198c.6-2.2 1.6-4.2 2-6.4 8.8-57.2 56.4-102.4 112.199-106.2 62.4-4.4 115.2 31.199 132.4 89.199 2.2 7.6 3.8 15.6 5.8 23.4v27.2c-.6 1.8-1.6 3.399-1.8 5.399-8.6 52.8-46.6 93-98.6 104.4-4 .8-8 2-12 3h-27.2c-1.8-.6-3.6-1.6-5.4-1.8-52-8.4-91.599-45.4-103.6-96.8-1.2-5-2.6-9.6-3.8-14.2zm252.4-768.797l-.001 27.202c-.6 2.2-1.6 4.2-1.8 6.4-9 57.6-56.8 102.6-113.2 106.2-62.2 4-114.8-32-131.8-90.2-2.2-7.401-3.8-15-5.6-22.401v-27.2c.6-1.8 1.6-3.4 2-5.2 9.6-52 39.8-86 90.2-102.2 6.6-2.2 13.6-3.4 20.4-5.2h27.2c1.8.6 3.6 1.6 5.4 1.8 52.2 8.6 91.6 45.4 103.6 96.8 1.201 4.8 2.401 9.4 3.601 13.999zm-.001 370.801v27.2c-.6 2.2-1.6 4.2-2 6.4-9 57.4-58.6 103.6-114.6 106-63 2.8-116.4-35.2-131.4-93.8-1.6-6.2-3-12.4-4.4-18.6v-27.2c.6-2.2 1.6-4.2 2-6.4 8.8-57.4 58.6-103.601 114.6-106.2 63-3 116.4 35.2 131.4 93.8 1.6 6.4 3 12.6 4.4 18.8z"},child:[]}]})(s)}function B(s){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(s)}const M=({event:s})=>{var t;const{user:m}=j(),[r,o]=f.useState(!1),e=N(),u=async()=>{const l=`${location.origin}/events/${s==null?void 0:s._id}`;navigator.share?navigator.share({url:l}):(await navigator.clipboard.writeText(l),g.success("Copied to clipboard!"))},{mutate:h,isPending:p}=b({mutationFn:z,onSuccess:l=>{e("/events"),g.success(l==null?void 0:l.message)},onError:l=>{g.error((l==null?void 0:l.message)||l)}}),x=l=>{l.preventDefault(),h(s==null?void 0:s._id)};return a.jsxs("div",{className:"absolute right-2 sm:right-4 top-4  text-white select-none",onClick:()=>o(l=>!l),children:[a.jsx(L,{className:"text-lg cursor-pointer"}),a.jsx("div",{className:`absolute font-roboto border-2 border-gray-500 right-4 text-left bg-white w-28 py-3 shadow-lg shadow-slate-700 rounded-md transform origin-top-right transition-transform  duration-200 ${r?"scale-100 opacity-100":"scale-0 opacity-0"} `,children:a.jsxs("div",{className:"flex flex-col px-1 gap-2 ",children:[a.jsxs("div",{onClick:()=>u(),className:"hover:shadow-md duration-200  cursor-pointer px-2 py-1 text-green-600 rounded-sm",children:[a.jsx(k,{className:" inline text-lg"})," Share"]}),m&&m._id===((t=s==null?void 0:s.userId)==null?void 0:t._id)&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{onClick:()=>e(`/updateEvent/${s==null?void 0:s._id}`),className:"hover:shadow-md cursor-pointer duration-200 text-blue-900 px-2 py-1 rounded-sm ",children:[a.jsx(B,{className:" inline text-lg"})," Edit"]}),a.jsxs("button",{onClick:x,disabled:p,className:"hover:shadow-md text-left cursor-pointer duration-200 text-red-500 px-2 py-1 rounded-sm",children:[a.jsx(_,{className:"inline text-lg"})," Delete"]})]})]})})]})},G=()=>{const{eventId:s}=w(),[m,r]=f.useState(null),{data:o,error:e,isError:u,isPending:h,isLoading:p}=D({queryKey:["getGroupByEventId",s],queryFn:()=>C(s)}),x=i=>{r(i.target.value)},{mutate:t,isPending:l}=b({mutationFn:({groupId:i,eventId:c})=>P({groupId:i,eventId:c}),onError:i=>{var c,n;g.error((n=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:n.message)},onSuccess:i=>{var c;g((c=i==null?void 0:i.data)==null?void 0:c.message)}}),d=i=>{i.preventDefault(),t({groupId:m,eventId:s})};return a.jsx("div",{className:"w-full",children:a.jsxs("form",{action:"",onSubmit:d,className:"w-full flex gap-2",children:[a.jsxs("select",{onChange:x,className:" p-2 rounded-md bg-white text-black",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Select an Event"}),o==null?void 0:o.map((i,c)=>a.jsx("option",{value:i==null?void 0:i._id,children:i==null?void 0:i.name},c))]}),l?a.jsx("div",{className:"p-2 w-12 rounded-lg bg-zinc-500",children:a.jsx(I,{size:"sm"})}):a.jsx("button",{type:"submit",className:"p-2 bg-blue-500 text-white rounded-lg",children:"join"})]})})},K=({event:s})=>{var o,e,u,h,p,x,t,l;const m=N(),{user:r}=j();return a.jsxs("div",{className:" mx-auto p-6 w-full bg-zinc-900 rounded-lg text-gray-100",children:[a.jsxs("header",{className:"text-center relative",children:[a.jsx($,{size:20,onClick:()=>m(-1),className:"cursor-pointer transition-all ease-in-out hover:scale-150  rounded-full absolute sm:left-4 top-4"}),a.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-4",children:s==null?void 0:s.title}),a.jsx("p",{className:"text-sm md:text-lg text-gray-300",children:`${s==null?void 0:s.eventDate} ${s==null?void 0:s.startTime} - ${s==null?void 0:s.endTime}`}),a.jsx(M,{event:s})]}),a.jsx("section",{className:"my-6 flex items-center justify-center",children:a.jsx("img",{src:s==null?void 0:s.imageUrl,alt:s==null?void 0:s.title,className:"w-5/6 object-cover rounded-lg shadow-md aspect-video"})}),a.jsx("section",{className:"my-6",children:a.jsx("p",{className:"text-lg text-gray-200",children:s==null?void 0:s.description})}),a.jsxs("section",{className:"my-6 flex-wrap gap-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(E,{size:"md",name:(o=s==null?void 0:s.userId)==null?void 0:o.userName,imageUrl:(e=s==null?void 0:s.userId)==null?void 0:e.profile_image_url}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base md:text-xl font-semibold",children:(u=s==null?void 0:s.userId)==null?void 0:u.userName}),a.jsx("p",{className:"text-gray-200",children:(h=s==null?void 0:s.userId)==null?void 0:h.email}),a.jsx("h1",{className:"text-sm md:text-base",children:A(s==null?void 0:s.createdAt)})]})]}),(r==null?void 0:r._id)===((p=s==null?void 0:s.userId)==null?void 0:p._id)&&a.jsx("div",{className:"h-full w-full flex items-center md:items-end justify-center md:justify-end gap-3 md:gap-0",children:a.jsx("a",{href:`https://event-attendance-zpls.vercel.app/events/${s._id}/attendance/${s.title}`,className:"bg-blue-500 p-2 w-fit rounded-md hover:bg-blue-600 transition cursor-pointer text-white",children:a.jsx("h1",{children:"Proceed to Attendance"})})})]}),a.jsxs("section",{className:"my-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-xl font-semibold",children:"Technical Events:"}),a.jsx("ul",{className:"list-disc pl-5",children:s==null?void 0:s.technical.map((d,i)=>a.jsx("li",{className:"text-gray-200",children:(d==null?void 0:d.name)||d},i))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xl font-semibold",children:"Non-Technical Events:"}),a.jsx("ul",{className:"list-disc pl-5",children:s==null?void 0:s.nonTechnical.map((d,i)=>a.jsx("li",{className:"text-gray-200",children:(d==null?void 0:d.name)||d},i))})]})]}),a.jsxs("section",{className:"my-6 bg-zinc-600 p-4 rounded-lg flex gap-2 flex-col",children:[a.jsxs("p",{className:"text-lg font-semibold",children:["Price: â‚¹",s==null?void 0:s.amount]}),a.jsx("p",{className:"text-gray-200",children:s!=null&&s.paid?"This is a paid event":"This event is free"}),a.jsxs("p",{className:"text-gray-200",children:["Swags: ",s!=null&&s.swags?"Provided":"Not Provided"]}),a.jsxs("p",{className:"text-gray-200",children:["Refreshments: ",s!=null&&s.refreshments?"Provided":"Not Provided"]}),r&&((x=s==null?void 0:s.userId)==null?void 0:x._id)!==(r==null?void 0:r._id)&&(s!=null&&s.paid?a.jsx(S,{className:"p-2 bg-blue-500 w-fit rounded-lg text-center",to:`/payments/${s==null?void 0:s._id}`,children:"Apply"}):a.jsx(G,{}))]}),a.jsxs("section",{className:"my-6 flex justify-between items-center",children:[a.jsxs("p",{className:"text-lg text-gray-200",children:[s==null?void 0:s.comments," Comments"]}),a.jsxs("button",{className:`px-6 py-2 text-white rounded-md hover:bg-gray-700 ${(t=s==null?void 0:s.likes)!=null&&t.includes(r==null?void 0:r._id)?"bg-blue-500":"bg-zinc-600"}`,children:["Like (",(l=s==null?void 0:s.likes)==null?void 0:l.length,")"]})]})]})};export{K as default};
