import{r as i,a as p,e as g,j as s,b as N,L as u}from"./index-C1C7CAEQ.js";import{s as b,d as w}from"./api-CJ7_z0NO.js";import{u as m}from"./useMutation-1ScYOpKK.js";import{A as y}from"./Avatar-ev3lOT99.js";import{u as k}from"./useQuery-CyVCY3EZ.js";function S(){const[a,d]=i.useState(!1),{user:l}=p(),t={name:l.userName,email:l.email,avatar:"https://i.pravatar.cc/150"},o=g(),{mutate:n,isPending:r}=m({mutationFn:b,onSuccess:()=>{localStorage.removeItem("user"),o("/login")}}),h=()=>{n(null,{onSuccess:()=>{localStorage.removeItem("token"),o("/login")}})};return s.jsxs("div",{className:"relative inline-block",children:[s.jsx("button",{onClick:()=>d(!a),className:"focus:outline-none",children:s.jsx(y,{size:"md",name:l==null?void 0:l.userName,imageUrl:l==null?void 0:l.profile_image_url})}),a&&s.jsx("div",{className:"absolute right-0 mt-2 w-fit min-w-44 bg-black shadow-lg rounded-md border border-gray-200 z-50",children:s.jsxs("div",{className:"p-2 text-gray-50",children:[s.jsx("p",{className:"font-semibold",children:t==null?void 0:t.name}),s.jsx("p",{className:"text-sm text-gray-300",children:t==null?void 0:t.email}),s.jsx("hr",{className:"my-2"}),s.jsx("button",{className:"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100",onClick:h,children:"Sign Out"})]})})]})}const I=()=>{const a=N(),[d,l]=i.useState(null),[t,o]=i.useState(!1),{user:n}=p(),[r,h]=i.useState("member"),{data:x}=k({queryKey:["role",n==null?void 0:n.id],queryFn:w,enabled:!!n});i.useEffect(()=>{x&&h(x)},[x]);const c=[{label:"Events",href:"/events"},{label:"About",href:"/about"}];r!=null&&r.host?c.splice(3,0,{label:"Dashboard",href:"/dashboard"}):r!=null&&r.moderator&&c.splice(3,0,{label:"Request",href:"/request"}),n&&(c.splice(3,0,{label:"Chats",href:"/chats"}),c.splice(3,0,{label:"Create Events",href:"/create-events"}));const f=g(),{mutate:v,isPending:L}=m({mutationFn:b,onSuccess:()=>{localStorage.removeItem("user"),f("/events")}}),j=()=>{v(null,{onSuccess:()=>{localStorage.removeItem("token"),f("/events")}})};return s.jsxs("header",{className:"p-5 z-10 max-w-[1440px] mx-auto text-lavender_bush",children:[s.jsxs("nav",{className:"flex justify-between items-center",children:[s.jsx(u,{to:"/events",className:" scale-125",children:"ACN.E"}),s.jsxs("ul",{className:"flex justify-center items-center gap-16 max-lg:hidden relative",children:[c.map(e=>s.jsxs("li",{onMouseEnter:()=>l(e.href),onMouseLeave:()=>l(null),className:"relative",children:[s.jsx(u,{to:e==null?void 0:e.href,className:" text-lg text-white capitalize",children:e==null?void 0:e.label}),s.jsx("span",{className:`absolute left-0 bottom-[-8px] h-[5px] rounded-full bg-purple-500 transition-all duration-300 ${(a==null?void 0:a.pathname)===(e==null?void 0:e.href)||d===(e==null?void 0:e.href)?"w-full":"w-0"} ${(a==null?void 0:a.pathname)===(e==null?void 0:e.href)?"bg-white":""}`})]},e==null?void 0:e.label)),n?s.jsx(S,{}):s.jsxs("li",{onMouseEnter:()=>l("/login"),onMouseLeave:()=>l(null),className:"relative",children:[s.jsx(u,{to:"/login",className:"text-lg text-white capitalize",children:"Login"}),s.jsx("span",{className:`absolute left-0 bottom-[-8px] h-[5px] rounded-full bg-purple-500 transition-all duration-300 ${d==="/login"?"w-full":"w-0"}`})]})]}),s.jsx("div",{className:"hidden max-lg:block",children:s.jsx("button",{className:"text-white text-lg",onClick:()=>o(!t),children:"☰"})})]}),s.jsxs("div",{className:`fixed top-0 left-0 z-50 h-full w-full bg-[#1f1f1f] text-white p-5 transform transition-transform duration-300 ${t?"translate-x-0":"-translate-x-full"}`,children:[s.jsx("button",{className:"text-lg font-bold absolute top-4 right-4",onClick:()=>o(!1),children:"✕"}),s.jsxs("ul",{className:"flex flex-col items-center justify-evenly h-full gap-6",children:[c.map(e=>s.jsx("li",{className:"text-lg w-full",children:s.jsx(u,{to:e==null?void 0:e.href,className:`capitalize hover:text-purple-500 ${(a==null?void 0:a.pathname)===(e==null?void 0:e.href)?"text-purple-500 font-bold":""}`,onClick:()=>o(!1),children:e==null?void 0:e.label})},e==null?void 0:e.label)),n?s.jsx("li",{className:"w-full",children:s.jsx("button",{className:"text-red-50 bg-red-950 p-2 w-full text-lg",onClick:j,children:"sign out"})}):s.jsx("li",{onMouseEnter:()=>l("/login"),onMouseLeave:()=>l(null),className:"relative",children:s.jsx(u,{to:"/login",className:"text-lg text-white capitalize",children:"Login"})})]})]})]})};export{I as H};
